<!DOCTYPE html>
<html>
<head>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name='viewport' content='initial-scale=1, viewport-fit=cover'>
	<meta name="viewport" content="width=device-width, user-scalable=no">
	<!-- Bootstrap CSS links-->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<!--Bootstrap glyphicons links--> 
	<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Saira+Extra+Condensed:wght@600;700&display=swap" rel="stylesheet">
	<!--CSS file link-->
	<link rel="stylesheet" type="text/css" href="styles/styles.css">
	<link rel="stylesheet" type="text/css" href="styles/util.css">
</head>
	<div class="relfiller pos-r sizefull">
		<div class="logintab tab">
		<div class="m-tab form">
			<h1 class="fw-600 fs-27 m-b-5">KH Virtual Queue</h1>
			<p class="m-b-20 t-g">Made by Dima Shkabura</p>
			<label for="role">Select your role:</label>
			<select name="role" id="role" onchange="showSelects()">
			  	<option value="0">Select one...</option>
			  	<option value="1">Student</option>
			  	<option value="2">Supervisor</option>
			</select>
			<label for="house" class="ns house">Select your house:</label>
			<select name="house" id="house" class="ns" onchange="togglebtn()">
			  	<option value="0">Select one...</option>
			  	<option value="1">Churchill's</option>
			  	<option value="2">EDH</option>
			  	<option value="3">Grove</option>
			  	<option value="4">Ingram's</option>
			  	<option value="5">MSH</option>
			  	<option value="6">Moser's</option>
			  	<option value="7">Oldham's</option>
			  	<option value="8">Port Hill</option>
			  	<option value="9">Radbrook</option>
			  	<option value="10">Ridgemount</option>
			  	<option value="11">Rigg's</option>
			  	<option value="12">School House</option>
			  	<option value="13">Severn Hill</option>
			</select>
			<label for="ygroup" class="ns ygroup">Select your year group:</label>
			<select name="ygroup" id="ygroup" class="ns" onchange="togglebtn()">
			  	<option value="0">Select one...</option>
			  	<option value="1">3rd Form</option>
			  	<option value="2">4th Form</option>
			  	<option value="3">5th Form</option>
			  	<option value="4">L6th Form</option>
			  	<option value="5">U6th Form</option>
			</select>
			<label for="loc" class="ns loc">Select the yeargroup you are supervising:</label>
			<select name="loc" id="loc" class="ns" onchange="togglebtn()">
			  	<option value="0">Select one...</option>
			  	<option value="1">3rd Form</option>
			  	<option value="2">4th Form</option>
			  	<option value="3">5th Form</option>
			  	<option value="4">L6th Form</option>
			  	<option value="5">U6th Form</option>
			</select>
			<button type="button" id="sub" class="b-btn m-t-20 disabled ripple pos-r of-hidden" disabled onclick="opentab()">Submit</button>
		</div>
		<div class="m-tab rinactive supervisor">
			<h2 class="fs-22 fw-600 m-b-20 txt-c" id="supTitle"></h2>
			<div class="alerts"></div>
			<div class="cont m-b-20" id="disAllOrderSup">
				
			</div>
			<span class="logout txt-c fs-20 fw-500 c-pointer" onclick="logout()">log out</span>
		</div>
		<div class="m-tab student rinactive">
			<h2 class="fs-22 fw-600 m-b-20 txt-c">KH Virtual Queue</h2>
			<div class="alerts w-full"></div>
			<div class="cont m-b-20">
				<h3 class="t-b fw-600 fs-22 txt-c m-b-20">Next meal:</h3>
				<h3 class="t-b fw-400 fs-20 txt-c"><span id="dismeal"></span></h3>
			</div>
			<div class="cont m-b-10">
				<h3 class="t-b fw-400 fs-20 txt-c m-b-20"><span id="dishouse"></span> <span id="disform"></span> queue position: <span class="fw-500" id="disorder"></span><span> out of 13</span></h3>
				<h3 class="t-b fw-400 fs-20 txt-c"><span id="disside"></span> side at:</h3>
				<h1 class="t-b fw-600 fs-28 txt-c m-t-10 m-b-0" id="distime"></h1>
			</div>
			<p class="t-g fw-400 fs-14 txt-c m-b-40">It is recommended that you arrive 1 - 3 min earlier just to ensure that you are on time.</p>
			<button class="w-btn m-b-20 ripple pos-r of-hidden" onclick="displayTimetable()">
				<div class="btn-hack pos-r">
					<span class="w-btn-txt fw-500 ab-l-m m-l-20">Queue info</span>
					<svg class="ab-r-m m-r-10" width="13" height="20" viewBox="0 0 13 20" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M1 19L11 10L1 1" stroke="#3656FF" stroke-width="2"/>
					</svg>
				</div>
			</button>
			<span class="logout txt-c fs-20 fw-500 c-pointer" onclick="logout()">log out</span>
		</div>
		<div class="m-tab rinactive stTimetable">
			<div class="top w-full pos-r">
				<div class="icon ab-l-m ripple c-pointer" onclick="displayTimetable()">
					<svg class="ab-c-m c-pointer" width="23" height="16" viewBox="0 0 22 16" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M9.63164 0.960628L9.63163 0.960626C9.17387 0.415094 8.36055 0.343934 7.81501 0.801694L0.961079 6.55282L0.946865 6.56474L0.933575 6.57769L0.848764 6.66031L0.835395 6.67333L0.823034 6.68732C0.536188 7.01183 0.438005 7.45104 0.538065 7.85378C0.583084 8.15335 0.733835 8.43953 0.984324 8.64972L0.984329 8.64972L7.83823 14.4008C8.38381 14.8587 9.19715 14.7874 9.65488 14.2419C10.1126 13.6964 10.0415 12.883 9.49592 12.4253C9.49592 12.4253 9.49591 12.4253 9.49591 12.4253L5.25635 8.86826H20.2106C20.9228 8.86826 21.5 8.29089 21.5 7.5788V7.56201L21.4988 7.54527L21.4916 7.43815L21.4905 7.42129L21.4882 7.40456C21.4029 6.77458 20.8638 6.28934 20.2106 6.28934H5.28684L9.47268 2.77726L9.48671 2.76549L9.49984 2.75273L9.58371 2.67119L9.59696 2.65831L9.60922 2.64448C10.0266 2.1739 10.0481 1.45691 9.63164 0.960628Z" fill="black" stroke="black"/>
					</svg>
				</div>
				<span class="fw-600 fs-22 lh-1-0 ab-l-m m-l-50 bigdate"></span>
			</div>
			<div class="cont" id="disAllOrder">
				
			</div>
		</div>
	</div>

	<script type="text/javascript">
		function showSelects(){
			var role = $("#role").val();
			$("#house").val(0);
			$("#ygroup").val(0);
			$("#loc").val(0);

			if(role==0){
				$("#house").addClass("ns");
				$("#ygroup").addClass("ns");
				$("#loc").addClass("ns");
				$(".house").addClass("ns");
				$(".ygroup").addClass("ns");
				$(".loc").addClass("ns");
			}
			if(role==1){
				$("#house").removeClass("ns");
				$("#ygroup").removeClass("ns");
				$("#loc").addClass("ns");
				$(".house").removeClass("ns");
				$(".ygroup").removeClass("ns");
				$(".loc").addClass("ns");
			}
			if(role==2){
				$("#house").addClass("ns");
				$("#ygroup").addClass("ns");
				$("#loc").removeClass("ns");
				$(".house").addClass("ns");
				$(".ygroup").addClass("ns");
				$(".loc").removeClass("ns");
			}
			togglebtn();
		}

		function togglebtn(){
			house = $("#house").val();
			ygroup = $("#ygroup").val();
			loc = $("#loc").val();
			role = $("#role").val();

			if(role == 0){
				$("#sub").attr("disabled");
				$("#sub").addClass("disabled");
			}
			if(role == 1){
				if(house == 0 || ygroup == 0){
					$("#sub").attr("disabled");
					$("#sub").addClass("disabled");
				}
				if(house != 0 && ygroup != 0){
					$("#sub").removeAttr("disabled");
					$("#sub").removeClass("disabled");
				}
			}
			if(role == 2){
				if(loc == 0){
					$("#sub").attr("disabled");
					$("#sub").addClass("disabled");
				}
				if(loc != 0){
					$("#sub").removeAttr("disabled");
					$("#sub").removeClass("disabled");
				}
			}	
		}

		function opentab(){
			role = $("#role").val();
			house = $("#house").val();

			if(role==1){
				$(".student").removeClass("rinactive");
				$(".form").addClass("linactive");
				getStudentValues();
			}
			if(role==2){
				$(".supervisor").removeClass("rinactive");
				$(".form").addClass("linactive");
				getStudentValues();
			}
			document.body.scrollTop = 0;
  			document.documentElement.scrollTop = 0;
		}
		function logout(){
			$("#role").val(0);
			$("#house").val(0);
			$("#ygroup").val(0);
			$("#loc").val(0);
			$(".student").addClass("rinactive");
			$(".supervisor").addClass("rinactive");
			$(".form").removeClass("linactive");
			document.body.scrollTop = 0;
  			document.documentElement.scrollTop = 0;
			showSelects();
		}
		function displayTimetable(){
			$(".stTimetable").toggleClass('rinactive');
			$(".student").toggleClass("linactive");
			document.body.scrollTop = 0;
  			document.documentElement.scrollTop = 0;
		}
	</script>
	<script type="text/javascript" src="algo.js"></script>
	<script type="text/javascript">
		let current;

		document.onpointerdown = function (event) {
		    if (current) {
		        const remove = current;
		        current = null;
		        setTimeout(function () {
		            if (remove.parentNode) remove.parentNode.removeChild(remove);
		        }, 800);
		    }

		    let target = event.target;
		    while (target && target.classList && !target.classList.contains("ripple")) target = target.parentNode;
		    if (!target || !target.classList || !target.classList.contains("ripple")) return;

		    const x = event.x - target.getBoundingClientRect().left;
		    const y = event.y - target.getBoundingClientRect().top;
		    const maxW = Math.max(x, target.offsetWidth - x);
		    const maxH = Math.max(y, target.offsetHeight - y);
		    const size = Math.sqrt(maxW * maxW + maxH * maxH);

		    const parent = document.createElement("div");
		    parent.style.position = "absolute";
		    parent.style.top = "0";
		    parent.style.right = "0";
		    parent.style.bottom = "0";
		    parent.style.left = "0";
		    parent.style.overflow = "hidden";
		    parent.style.borderRadius = "inherit";
		    parent.style.transform = "perspective(0)";
		    target.appendChild(parent);

		    const effect = document.createElement("div");
		    effect.style.position = "absolute";
		    effect.style.top = (y - size) + "px";
		    effect.style.left = (x - size) + "px";
		    effect.style.height = size * 2 + "px";
		    effect.style.width = size * 2 + "px";
		    effect.style.background = "rgba(0, 0, 0, 0.08)";
		    effect.style.borderRadius = "50%";
		    effect.style.transform = "scale(0)";
		    effect.style.transition = "opacity 300ms, transform 300ms";
		    parent.appendChild(effect);

		    current = parent;

		    const timeout = setTimeout(function () {
		        effect.style.transform = "scale(1)";
		    }, 16);

		    document.onpointerup = document.onpointercancel = function () {
		        document.onpointerup = document.onpointercancel = document.onpointermove = null;
		        current.firstChild.style.opacity = "0";
		    };

		    document.onpointermove = function (move) {
		        if (event.x - move.x > 4 || event.x - move.x < -4 || event.y - move.y > 4 || event.y - move.y < -4) {
		            clearTimeout(timeout);
		            document.onpointercancel();
		        }
		    };
		};
	</script>
</body>
